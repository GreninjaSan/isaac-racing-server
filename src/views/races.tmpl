{{define "content"}}
<!-- Main -->
<section id="race-main" class="container">
	<header class=race>
		<h2>Race Listing</h2>
		<p>The latest completed races</p>
	</header>

	<div id="race-listing-buttons" class="row">
		{{ if ge .PreviousPage 1 -}}
			<div class="3u 12u">
				<a href="../races" class="button fit">&lt;&lt;</a>
			</div>
			<div class="3u 12u">
				<a href="../races/{{ .PreviousPage }}" class="button fit">&lt;</a>
			</div>
		{{- else }}
			<div class="3u 12u">
				&nbsp;
			</div>
			<div class="3u 12u">
				&nbsp;
			</div>
		{{- end }}
		{{ if le .NextPage .TotalPages }}
			<div class="3u 12u">
				<a href="../races/{{ .NextPage }}" class="button fit">&gt;</a>
			</div>
			<div class="3u 12u">
				<a href="../races/{{ .TotalPages }}" class="button fit">&gt;&gt;</a>
			</div>
		{{- else }}
			<div class="3u 12u">
				&nbsp;
			</div>
			<div class="3u 12u">
				&nbsp;
			</div>
		{{- end }}
	</div>
	<br />

	<section class="race-box">
		<div class="table-wrapper">
			<table id="race-listing-table">
				<thead>
					<tr>
						<th class="races-th-id">ID</th>
						<th class="races-th-date">Date &amp; Time</th>
						<th class="races-th-ranked">Ranked</th>
						<th class="races-th-format">Format</th>
						<th class="races-th-char">Character</th>
						<th class="races-th-goal">Goal</th>
						<th class="races-th-racer">Racer</th>
						<th class="races-th-place">Place</th>
						<th class="races-th-time">Time</th>
						<th class="races-th-st-item">Starting<br />Item</th>
						<th class="races-th-comment">Comment</th>
					</tr>
				</thead>
				<tfoot>
					<tr>
						<td colspan="100%">
							Total Races: {{ .TotalRaceCount }}
						</td>
					</tr>
				</tfoot>
				<tbody>
					{{ range .ResultsRaces }}
						<tr>
							{{ $racers := len .RaceParticipants }}
							<td rowspan="{{ $racers }}" class="races-td-id"><a href="/race/{{ .RaceID }}">{{ .RaceID }}</a></td>
							<td id="racedate" rowspan="{{ $racers }}" class="races-td-date"> {{ .RaceDateStart }}</td>
							<td rowspan="{{ $racers }}" class="races-td-ranked"><img src="/public/img/ranked/{{ if eq .RaceType "0" -}} unranked {{- else -}} ranked {{- end }}.png" title="{{ if eq .RaceType "0" -}} Unranked {{- else -}} Ranked {{- end }}" /></td>
							<td rowspan="{{ $racers }}" class="races-td-format"><img src="/public/img/formats/{{ .RaceFormat }}.png" title="{{ .RaceFormat }}" /></td>
							<td rowspan="{{ $racers }}" class="races-td-char"><img src="/public/img/characters/{{ .RaceChar }}.png" title="{{ .RaceChar }}" /></td>
							<td rowspan="{{ $racers }}" class="races-td-goal"><img src="/public/img/goals/{{ .RaceGoal }}.png" title="{{ .RaceGoal }}" /></td>

							{{ range $index, $results := .RaceParticipants }}
								<td class=racername>
									<a href="../profile/{{ .RacerName }}">{{ .RacerName }}</a>
								</td>
								{{ if eq .RacerPlace -1 -}}
									<td class="races-td-place">Quit</td>
									<td class="races-td-time">&nbsp;</td>
									<td class="races-td-st-item"><img src="/public/img/items/ {{- .RacerStartingItem -}} .png" /></td>
								{{- else}}
									<td class="races-td-place">{{ .RacerPlace }}</td>
									<td class="races-td-time">{{ .RacerTime }}</td>
									<td class="races-td-st-item"><img src="/public/img/items/ {{- .RacerStartingItem -}} .png" /></td>
								{{- end }}
								{{ if ne .RacerComment "-" -}}
									<td	title="{{ .RacerComment }}" class="races-td-comment"> {{ .RacerComment }}</td>
								{{- else}}
									<td>&nbsp;</td>
								{{ end }}
							<tr>
							{{ end }}
							</tr>
						</tr>
					{{- end }}
				</tbody>
			</table>
		</div>
	</section>
	<div id="race-listing-buttons" class="row">
		{{ if ge .PreviousPage 1 -}}
			<div class="3u 12u">
				<a href="../races" class="button fit">&lt;&lt;</a>
			</div>
			<div class="3u 12u">
				<a href="../races/{{ .PreviousPage }}" class="button fit">&lt;</a>
			</div>
		{{- else }}
			<div class="3u 12u">
				&nbsp;
			</div>
			<div class="3u 12u">
				&nbsp;
			</div>
		{{- end }}
		{{ if le .NextPage .TotalPages }}
			<div class="3u 12u">
				<a href="../races/{{ .NextPage }}" class="button fit">&gt;</a>
			</div>
			<div class="3u 12u">
				<a href="../races/{{ .TotalPages }}" class="button fit">&gt;&gt;</a>
			</div>
		{{- else }}
			<div class="3u 12u">
				&nbsp;
			</div>
			<div class="3u 12u">
				&nbsp;
			</div>
		{{- end }}
	</div>
</section>
{{end}}
